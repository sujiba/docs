
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sujiba.github.io/wiki/homeassistant/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Home Assistant - Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#home-assistant" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Kopfzeile">
    <a href="../.." title="Docs" class="md-header__button md-logo" aria-label="Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home Assistant
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
        <button type="reset" class="md-search__icon md-icon" title="Zurücksetzen" aria-label="Zurücksetzen" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Hauptnavigation" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Wiki
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Docs" class="md-nav__button md-logo" aria-label="Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Wiki
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Wiki" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Wiki
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Willkommen
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hetzner_x_restic/" class="md-nav__link">
        Hetzner x Restic
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Home Assistant
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Home Assistant
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#einfuhrung" class="md-nav__link">
    Einführung
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vorbereitung" class="md-nav__link">
    Vorbereitung
  </a>
  
    <nav class="md-nav" aria-label="Vorbereitung">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#boot-from-usb" class="md-nav__link">
    Boot from USB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hassos-auf-ssd-laden" class="md-nav__link">
    HassOS auf SSD laden
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#einrichtung" class="md-nav__link">
    Einrichtung
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-ons" class="md-nav__link">
    Add-Ons
  </a>
  
    <nav class="md-nav" aria-label="Add-Ons">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lets-encrypt" class="md-nav__link">
    Let's Encrypt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-home-assistant-ssl-proxy" class="md-nav__link">
    NGINX Home Assistant SSL proxy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-terminal" class="md-nav__link">
    SSH &amp; Terminal
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mosquitto-broker" class="md-nav__link">
    Mosquitto broker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zigbee2mqtt" class="md-nav__link">
    Zigbee2MQTT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uptime-kuma" class="md-nav__link">
    Uptime Kuma
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrationen" class="md-nav__link">
    Integrationen
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#einfuhrung" class="md-nav__link">
    Einführung
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vorbereitung" class="md-nav__link">
    Vorbereitung
  </a>
  
    <nav class="md-nav" aria-label="Vorbereitung">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#boot-from-usb" class="md-nav__link">
    Boot from USB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hassos-auf-ssd-laden" class="md-nav__link">
    HassOS auf SSD laden
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#einrichtung" class="md-nav__link">
    Einrichtung
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-ons" class="md-nav__link">
    Add-Ons
  </a>
  
    <nav class="md-nav" aria-label="Add-Ons">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lets-encrypt" class="md-nav__link">
    Let's Encrypt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-home-assistant-ssl-proxy" class="md-nav__link">
    NGINX Home Assistant SSL proxy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-terminal" class="md-nav__link">
    SSH &amp; Terminal
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mosquitto-broker" class="md-nav__link">
    Mosquitto broker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zigbee2mqtt" class="md-nav__link">
    Zigbee2MQTT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uptime-kuma" class="md-nav__link">
    Uptime Kuma
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrationen" class="md-nav__link">
    Integrationen
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="home-assistant">Home Assistant</h1>
<h2 id="einfuhrung">Einführung</h2>
<hr />
<p>Home Assistant ist eine kostenlose und quelloffene Software zur Hausautomation, die als zentrales Steuerungssystem in einem Smart Home oder Smart House konzipiert ist. Geschrieben in Python liegt ihr Hauptaugenmerk auf lokaler Steuerung und Privatsphäre. </p>
<h2 id="vorbereitung">Vorbereitung</h2>
<hr />
<p>Es wird empfohlen, anstelle der SD-Karte eine SSD einzusetzen, da Home Assistant sehr schreibintensiv ist und SD-Karten durch viele Schreibvorgänge frühzeitig einen Defekt erleiden können. Damit der Raspberry Pi beim Systemstart von der SSD bootet, muss die Boot-Reihenfolge angepasst werden.</p>
<h3 id="boot-from-usb">Boot from USB</h3>
<p>Raspberry Pi Imager öffnen. Unter "OS Wählen/Misc utility images/Bootloader/USB Boot" auswählen. Dann unter "SD-Karte wählen" die SD-Karte auswählen und mit "Schreiben" den Vorgang starten. Sobald die SD-Karte beschrieben und ausgeworfen wurde, kann diese in den Raspberry Pi gesteckt werden. Den Raspberry Pi an den Strom anschließen. Eine Minute warten, den Raspberry Pi wieder vom Strom trennen und die SD-Karte entfernen.</p>
<h3 id="hassos-auf-ssd-laden">HassOS auf SSD laden</h3>
<p>Als nächstes können wir die SSD vorbereiten. Diese über SATA zu USB Adapter am Rechner anschließen. Erneut den Raspberry Pi Imager öffnen. In diesem Fall wählen wir unter "OS wählen/Other specific-purpose OS/Home assistants and home automation/Home Assistant/Home Assistant OS 9.3 (Pi Version)" aus. Unter "SD-Karte wählen" die SSD auswählen und auf "Schreiben" klicken. Nach Abschluss des Schreibvorgangs kann die SSD vom Rechenr getrennt und an den Raspberry Pi angeschlossen werden. Abschließen den Raspberry Pi wieder mit Strom versorgen.</p>
<h2 id="einrichtung">Einrichtung</h2>
<hr />
<p>Home Assistant ist jetzt unter <a href="http://homeassistant.local:8123">http://homeassistant.local:8123</a> erreichbar und kann eingerichtet werden. Siehe hierfür <a href="https://www.home-assistant.io/getting-started/onboarding/">Onboarding</a>.</p>
<h2 id="add-ons">Add-Ons</h2>
<hr />
<p>Unter "Einstellungen/Add-Ons" kann man über den "Add-On Store" (Schalter unten rechts) Erweiterungen hinzufügen. Diese Add-Ons sind weitere Docker Container, die über Home Assistant konfiguriert und gestartet werden. Die Konfigurationen können auch in YAML bearbeitet werden. Hierfür bei dem jeweiligen Add-On unter dem Reiter "Konfiguration" auf das drei Punkte Menü klicken und "Als YAML bearbeiten" auswählen.</p>
<h3 id="lets-encrypt">Let's Encrypt</h3>
<p><a href="https://github.com/home-assistant/addons/blob/master/letsencrypt/DOCS.md">Dokumentation</a>
</br ></p>
<p>Folgend ein Beispiel zur Erstellung eines Let's Encrypt Zertifkats mit DNS-01 und der Netcup API:</p>
<details>
<summary>Konfiguration</summary>
<div class="highlight"><pre><span></span><code><span class="nt">domains</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">home.example.com</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">second.example.com</span><span class="w"></span>
<span class="nt">email</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MAIL</span><span class="w"></span>
<span class="nt">keyfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">privkey.pem</span><span class="w"></span>
<span class="nt">certfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fullchain.pem</span><span class="w"></span>
<span class="nt">challenge</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dns</span><span class="w"></span>
<span class="nt">dns</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dns-netcup</span><span class="w"></span>
<span class="w">  </span><span class="nt">propagation_seconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">900</span><span class="w"></span>
<span class="w">  </span><span class="nt">netcup_customer_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;123456&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">netcup_api_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">KEY</span><span class="w"></span>
<span class="w">  </span><span class="nt">netcup_api_password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PASSWORD</span><span class="w"></span>
</code></pre></div>
</details>

<p>Das Zertifikat sowie der Key werden unter /ssl abgelegt und können so auch von anderen Add-Ons genutzt werde.</p>
<h3 id="nginx-home-assistant-ssl-proxy">NGINX Home Assistant SSL proxy</h3>
<p><a href="https://github.com/home-assistant/addons/blob/master/nginx_proxy/DOCS.md">Dokumentation</a>
</br></p>
<p>Folgend ein Beispiel zur Einrichtung des Reverse Proxys:</p>
<details>
<summary>Konfiguration</summary>
<div class="highlight"><pre><span></span><code><span class="nt">domain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">home.example.com</span><span class="w"></span>
<span class="nt">hsts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">max-age=31536000; includeSubDomains</span><span class="w"></span>
<span class="nt">certfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fullchain.pem</span><span class="w"></span>
<span class="nt">keyfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">privkey.pem</span><span class="w"></span>
<span class="nt">cloudflare</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="nt">customize</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">active</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">  </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx_proxy_default*.conf</span><span class="w"></span>
<span class="w">  </span><span class="nt">servers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx_proxy/*.conf</span><span class="w"></span>
</code></pre></div>
</details>

<p>Durch das Setzen der Option "active: true" haben wir jetzt die Möglichkeit weitere vHosts für andere Add-Ons (zB Uptime Kuma) unter "nginx_proxy/*.conf" anzulegen. Der Ordner "nginx_proxy" muss unter "/share" angelegt werden. Dies kann mit dem Add-On "Terminal &amp; SSH" gemacht werden.</p>
<h3 id="ssh-terminal">SSH &amp; Terminal</h3>
<p><a href="https://github.com/home-assistant/addons/blob/master/ssh/DOCS.md">Dokumentation</a></p>
<h3 id="mosquitto-broker">Mosquitto broker</h3>
<p><a href="https://github.com/home-assistant/addons/blob/master/mosquitto/DOCS.md">Dokumentation</a></p>
<h3 id="zigbee2mqtt">Zigbee2MQTT</h3>
<p><a href="https://github.com/zigbee2mqtt/hassio-zigbee2mqtt/blob/master/README.md">Dokumentation</a>
</br></p>
<p>Folgend ein Beispiel zur Einrichtung von Zigbee2MQTT mit dem ConBee II:</p>
<details>
<summary>Konfiguration</summary>
<div class="highlight"><pre><span></span><code><span class="nt">data_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/config/zigbee2mqtt</span><span class="w"></span>
<span class="nt">socat</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">  </span><span class="nt">master</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pty,raw,echo=0,link=/tmp/ttyZ2M,mode=777</span><span class="w"></span>
<span class="w">  </span><span class="nt">slave</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp-listen:8485,keepalive,nodelay,reuseaddr,keepidle=1,keepintvl=1,keepcnt=5</span><span class="w"></span>
<span class="w">  </span><span class="nt">options</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;-d</span><span class="nv"> </span><span class="s">-d&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">log</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="nt">mqtt</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w"></span>
<span class="nt">serial</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">adapter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deconz</span><span class="w"></span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/dev/ttyACM0</span><span class="w"></span>
</code></pre></div>
</details>

<h3 id="uptime-kuma">Uptime Kuma</h3>
<p><a href="https://github.com/hassio-addons/addon-uptime-kuma/blob/main/uptime-kuma/DOCS.md">Dokumentation</a>
</br></p>
<p>Damit Uptime Kuma auch über https erreichbar ist, muss jetzt unter "/share/nginx_proxy" eine neue vHost Konfiguration angelegt werden:</p>
<details>
<summary>uptime-kuma.conf</summary>
<div class="highlight"><pre><span></span><code>server <span class="o">{</span>
  listen <span class="m">443</span> ssl http2<span class="p">;</span>
  server_name sub.domain.com<span class="p">;</span>
  ssl_certificate     /ssl/fullchain.pem<span class="p">;</span>
  ssl_certificate_key /ssl/privkey.pem<span class="p">;</span>

  location / <span class="o">{</span>
    proxy_set_header   X-Real-IP <span class="nv">$remote_addr</span><span class="p">;</span>
    proxy_set_header   X-Forwarded-For <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
    proxy_set_header   Host <span class="nv">$host</span><span class="p">;</span>
    proxy_pass         http://HOSTNAME:3001/<span class="p">;</span>
    proxy_http_version <span class="m">1</span>.1<span class="p">;</span>
    proxy_set_header   Upgrade <span class="nv">$http_upgrade</span><span class="p">;</span>
    proxy_set_header   Connection <span class="s2">&quot;upgrade&quot;</span><span class="p">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
</details>

<p>"HOSTNAME" muss ersetzt werden. Hier muss der korrekte Name des Docker Containers eingetragen werden, ansonsten kann der Traffic nicht weitergeleitet werden. Der Hostname des Containers ist bei dem jeweiligen Add-On unter dem Punkt "Informationen" zu finden. </p>
<h2 id="integrationen">Integrationen</h2>
<hr />
<p>Über <a href="https://www.home-assistant.io/integrations/">Integrationen</a> können die verschiedensten Hersteller sowie Produkte in Home Assistant eingebunden werden. </p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Fußzeile" >
      
        
        <a href="../hetzner_x_restic/" class="md-footer__link md-footer__link--prev" aria-label="Zurück: Hetzner x Restic" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Zurück
              </span>
              Hetzner x Restic
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/sujiba" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://hub.docker.com/u/sujiba" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.config.lang": "de", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Suche", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version.title": "Version ausw\u00e4hlen"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>